!function(e){function n(e){for(var n=e+"=",o=document.cookie.split(";"),t=0;t<o.length;t++){for(var l=o[t];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(n))return l.substring(n.length,l.length)}return null}e.fn.wgModal=function(o){var t=e.extend({},{triggerElement:"",openDelay:null,openScrolled:null,openAfterNClicks:null,width:null,verticalCentering:!1,topOffset:null,bottomOffset:null,keyboard:!0,innerScroll:!1,remote:null,theme:"",responsive:{},onInitialize:function(e){},onBeforeClose:function(e){},onAfterClose:function(e){},onBeforeOpen:function(e){},onAfterOpen:function(e){}},o),l=this;return l.initialize=function(){l.addClass("wg-modal"),l.wrapInner('<div class="wg-content"></div>'),l.prepend(e('<div class="wg-modal-close"></div>'))},l.closeModal=function(){t.onBeforeClose.call(l,l),l.parent(".bg-wg-modal").addClass("closing"),setTimeout((function(){l.parent().hasClass("bg-wg-modal")&&(l.unwrap(".bg-wg-modal"),l.parent(".bg-wg-modal").removeClass("closing"))}),400),e(l).css("padding-top",""),t.onAfterClose.call(l,l)},l.openModal=function(){if(!1===l.parent().hasClass("bg-wg-modal")){if(t.onBeforeOpen.call(l,l),l.wrap('<div class="bg-wg-modal"></div>'),e(l).children(".wg-content").children(".wg-header").length>0){var n=e(l).children(".wg-content").children(".wg-header").outerHeight();console.log(n),e(l).css({"padding-top":parseFloat(n)+parseFloat(e(l).css("padding-top"))})}t.onAfterOpen.call(l,l)}},this.each((function(){e(this);var n=this;t.onInitialize.call(n,l),l.initialize(),i(),a(n,!0),e(window).on("resize",(function(e){i(),a(n,!1)})),e(n).on("click",".wg-modal-close",(function(){l.closeModal()})),e(document).on("click",".bg-wg-modal",(function(){e(n).parent().hasClass("bg-wg-modal")&&l.closeModal()})),e(n).click((function(e){e.stopPropagation()}))}));function i(){var n=t.responsive;if(0!==Object.keys(n).length){var l=e(window).width(),i=null;e.each(n,(function(e,n){l>e&&(i=e)})),null!==i?(t=e.extend({},t,o),t=e.extend({},t,o.responsive[i])):t=e.extend({},t,o)}}function a(o,i){if(e(window).on("load resize",(function(n){t.verticalCentering&&(e(o).height()<function(){var e=window,n="inner";return"innerWidth"in window||(n="client",e=document.documentElement||document.body),{width:e[n+"Width"],height:e[n+"Height"]}}().height?e(o).addClass("verticalCentering"):e(o).removeClass("verticalCentering"))})),null!==t.remote&&e(o).children(".wg-content").load(t.remote),null!==t.width&&e(o).css("width",t.width),null!==t.topOffset&&e(o).css("margin-top",t.topOffset),null!==t.bottomOffset&&e(o).css("margin-bottom",t.bottomOffset),!0===t.innerScroll){e(o).addClass("innerScroll");var a="calc(100vh - "+(parseFloat(e(o).css("margin-top"))+parseFloat(e(o).css("margin-bottom"))+parseFloat(e(o).css("padding-top"))+parseFloat(e(o).css("padding-bottom"))+parseFloat(e(o).css("border-top-width"))+parseFloat(e(o).css("border-bottom-width")))+"px)";e(o).children(".wg-content").css("max-height",a)}if(""!==t.theme&&e(o).addClass(t.theme),null!==t.openAfterNClicks){var r=144;(c=new Date).setMonth(c.getMonth()+r),d=(d=(d=(d=l.selector).replace("#","id_")).replace(".","class_")).replace("-","_");var s=n(p="wgModalCounter"+d);s<=t.openAfterNClicks&&(s++,document.cookie=p+"="+s+"; expires="+c+";path=/",s===t.openAfterNClicks&&l.openModal())}if(null!==t.openScrolled){var c,d;r=144,(c=new Date).setMonth(c.getMonth()+r);var p="wgAlreadyOpened"+(d=(d=(d=(d=l.selector).replace("#","id_")).replace(".","class_")).replace("-","_"));e(window).on("load resize scroll",(function(o){var i=n(p);e(this).scrollTop()>=t.openScrolled&&1!=i&&(l.openModal(),document.cookie=p+"=1; expires="+c+";path=/")}))}i&&null!==t.openDelay&&setTimeout((function(){l.openModal()}),t.openDelay),""!==t.triggerElement&&e(t.triggerElement).click((function(){l.openModal()})),!0===t.keyboard&&e(document).keyup((function(n){27===n.keyCode&&e(o).parent().hasClass("bg-wg-modal")&&l.closeModal()}))}}}(jQuery);